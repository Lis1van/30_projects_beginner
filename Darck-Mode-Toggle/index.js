// ### JavaScript Код: Обзор и Описание

// Этот JavaScript код добавляет функциональность к переключателю темного режима, 
// позволяя сохранять и восстанавливать состояние переключателя с использованием `localStorage`. 
// Давайте рассмотрим каждый блок кода и разберем, как он работает.

const inputEl = document.querySelector(".input");
const bodyEl = document.querySelector("body");

// #### Поиск элементов в DOM:

// - **`document.querySelector(".input");`**
//   - Ищет элемент с классом `input` (наш скрытый `checkbox`) и сохраняет ссылку на него 
// в переменной `inputEl`.
//   - Это будет использоваться для проверки и изменения состояния переключателя.

// - **`document.querySelector("body");`**
//   - Ищет элемент `body` и сохраняет ссылку на него в переменной `bodyEl`.
//   - Это нужно для изменения фона страницы при переключении темы.

inputEl.checked = JSON.parse(localStorage.getItem("mode"));

// #### Установка начального состояния переключателя:

// - **`localStorage.getItem("mode")`**
//   - Получает сохраненное состояние переключателя из `localStorage`, 
// используя ключ `"mode"`.
//   - `localStorage` позволяет хранить данные в виде строк, поэтому сохраненное значение 
// нужно преобразовать обратно в boolean с помощью `JSON.parse`.

// - **`inputEl.checked = JSON.parse(...);`**
//   - Устанавливает состояние `checked` для `checkbox` (`inputEl`) в соответствии с 
// сохраненным значением.
//   - Это определяет, включен ли переключатель или нет при загрузке страницы.

updateBody();

// #### Обновление стиля тела страницы:

// - **`updateBody();`**
//   - Вызывает функцию `upbateBody`, чтобы установить правильный фон страницы в 
// соответствии с текущим состоянием переключателя.

function updateBody() {
  if (inputEl.checked) {
    bodyEl.style.background = "black";
  } else {
    bodyEl.style.background = "white";
  }
}

// #### Функция `updateBody`:

// - **`function updateBody() {...}`**
//   - Это функция, которая обновляет цвет фона тела страницы на основе состояния переключателя.

// - **`if (inputEl.checked) {...} else {...}`**
//   - Проверяет, включен ли переключатель (`inputEl.checked`).
//   - Если `checked` равно `true`, устанавливает фон страницы в черный (`"black"`).
//   - Если `checked` равно `false`, устанавливает фон страницы в белый (`"white"`).

inputEl.addEventListener("input", () => {
  updateBody();
  updateLocalStorage();
});

// #### Событие `input` на `checkbox`:

// - **`inputEl.addEventListener("input", () => {...});`**
//   - Добавляет слушатель события для `input` на переключатель (`checkbox`).
//   - Событие `input` срабатывает, когда изменяется значение `checkbox`.

// - **`updateBody();`**
//   - Вызывает функцию `updateBody` для обновления фона страницы в соответствии 
// с новым состоянием переключателя.

// - **`updateLocalStorage();`**
//   - Вызывает функцию `updateLocalStorage` для сохранения текущего состояния переключателя в `localStorage`.

function updateLocalStorage() {
  localStorage.setItem("mode", JSON.stringify(inputEl.checked));
}

// #### Функция `updateLocalStorage`:

// - **`function updateLocalStorage() {...}`**
//   - Это функция, которая сохраняет текущее состояние переключателя в `localStorage`.

// - **`localStorage.setItem("mode", JSON.stringify(inputEl.checked));`**
//   - Сохраняет состояние `checked` переключателя в `localStorage` под ключом `"mode"`.
//   - `JSON.stringify` используется для преобразования состояния `checked` (boolean) 
// в строку перед сохранением.

// ### Общая концепция

// 1. **Инициализация состояния**:
//    - При загрузке страницы, код загружает сохраненное состояние переключателя
//  из `localStorage` и устанавливает его на `checkbox`.
//    - Затем обновляется цвет фона страницы в соответствии с этим состоянием.

// 2. **Обработка изменений**:
//    - Когда пользователь переключает `checkbox`, событие `input` обновляет фон страницы 
// и сохраняет новое состояние в `localStorage`.

// 3. **Сохранение состояния**:
//    - При каждом изменении состояния переключателя, новое состояние сохраняется
//  в `localStorage`, чтобы его можно было восстановить при следующем посещении страницы.

// ### Итог

// Этот JavaScript код обеспечивает переключение темы с сохранением состояния,
// делая интерфейс удобным и отзывчивым к предпочтениям пользователя.